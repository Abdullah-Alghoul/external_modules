# -*- coding: utf-8 -*-
# Â© 2016 Comunitea - Javier Colmenero <javier@comunitea.com>
# License AGPL-3 - See http://www.gnu.org/licenses/agpl-3.0.html
from openerp import models, api


class StockPicking(models.Model):
    _inherit = 'stock.picking'

    @api.model
    def _get_invoice_vals(self, key, inv_type, journal_id, move):
        res = super(StockPicking, self)._get_invoice_vals(key, inv_type,
                                                          journal_id,
                                                          move)
        if move.picking_id.sale_id.gd_id:
                res.update({
                    'gd_id': move.picking_id.sale_id.gd_id.id,
                })
        return res
