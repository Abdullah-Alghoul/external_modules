<?xml version="1.0" encoding="UTF-8"?>
<openerp>
  <data>

    <template id="report_invoice_document_custom" inherit_id="account.report_invoice_document">
        <xpath expr="//tbody[@class='invoice_tbody']" position="replace">
            <!-- Not show global_discount_lines -->
             <tbody class="invoice_tbody">
                    <tr t-foreach="o.invoice_line" t-as="l">
                        <t t-if='not l.global_discount'>
                            <td><span t-field="l.name"/></td>
                            <td>
                                <span t-field="l.quantity"/>
                                <span t-field="l.uos_id"  groups="product.group_uom"/>
                            </td>
                            <td class="text-right">
                                <span t-field="l.price_unit"/>
                            </td>
                            <td class="text-right" groups="sale.group_discount_per_so_line"><span t-field="l.discount"/></td>
                            <td class="text-right">
                                <span t-esc="', '.join(map(lambda x: x.name, l.invoice_line_tax_id))"/>
                            </td>
                            <td class="text-right">
                                <span t-field="l.price_subtotal" 
                                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                            </td>
                        </t>
                    </tr>
                </tbody>
        </xpath>


        <xpath expr="//div[@class='row'][2]" position="replace">
             <div class="row">
                <div class="col-xs-4 pull-right">
                    <table class="table table-condensed">
                        <!-- Add New files -->
                        <tr class="border-black">
                            <td><strong>Subtotal</strong></td>
                            <td class="text-right">
                                <span t-field="o.amount_subtotal"
                                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                            </td>
                        </tr>
                        <tr t-if='o.gd_id'>
                            <td><span t-field="o.gd_id.name"/></td>
                            <td class="text-right">
                                <span t-field="o.amount_discount"
                                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                            </td>
                        </tr>
                        <!-- Same like original -->
                        <tr class="border-black">
                            <td><strong>Total Without Taxes</strong></td>
                            <td class="text-right">
                                <span t-field="o.amount_untaxed"
                                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                            </td>
                        </tr>
                        <tr>
                            <td>Taxes</td>
                            <td class="text-right">
                                <span t-field="o.amount_tax"
                                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                            </td>
                        </tr>
                        <tr class="border-black">
                            <td><strong>Total</strong></td>
                            <td class="text-right">
                                <span t-field="o.amount_total"
                                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </xpath> 
    </template>

  </data>
</openerp>